/*! cleverlist - Kande Bonfim <kandebonfim@gmail.com> - 2016-07-01 */
(function(){this.CleverList=function(){function a(a){this.content=a,this.tpl={},this.def={append:".",last:" and ",others:" others",comma:", ",limit:3,type:"string"}}return a.prototype.toSentence=function(a){var b;return a.length>this.def.limit+1?(b=""+(a.length-this.def.limit)+this.def.others,a=a.splice(0,this.def.limit)):b=a.pop(),a.length?""+a.join(this.def.comma)+this.def.last+b:b},a.prototype.addTemplate=function(a,b){return this.tpl[a]=b},a.prototype.withTemplate=function(a,b){var c,d;this.content=b,this.tpl[a]?c=this.tpl[a]:console.error("Template not found.");for(d in this.def)c[d]&&(this.def[d]=c[d]);return this.result()},a.prototype.parseObject=function(){var a,b,c,d,e,f,g,h,i;for(this.objectToArray(),f=this.content,i=[],d=c=0,e=f.length;e>c;d=++c)b=f[d],a=document.createElement("a"),this.wasObject?(g=[this.resolveobject("attributes.name",b),this.resolveobject("attributes.url",b)],a.innerText=g[0],a.href=g[1]):(h=[b[0],b[1]],a.innerText=h[0],a.href=h[1]),i.push(this.content[d]=a.outerHTML);return i},a.prototype.objectToArray=function(){return this.content=this.content.data,this.wasObject=!0},a.prototype.resolveobject=function(a,b,c){return a.split(".").reduce(function(a,b){return c?a?a[b]:void 0:a[b]},b||self)},a.prototype.result=function(){return"link"===this.def.type&&this.parseObject(),""+this.toSentence(this.content)+this.def.append},a}()}).call(this);